# Tech Stack: AI Configuration Systems

## Overview
AI configuration repositories for managing agent definitions, workflow patterns, and AI tool settings across multiple platforms (Claude Code, Copilot, Gemini, Cursor). Emphasizes agent-agnostic design, modularity, and Unix philosophy applied to AI configurations.

## Architecture Patterns

### Configuration Layers
Agent-agnostic, composable configuration system:

```
.ai/
├── 1_templates/            # Specification templates
│   ├── spec-template.md
│   ├── plan-template.md
│   ├── tasks-template.md
│   ├── bootstrap-template.md
│   ├── review-template.md
│   ├── constitution-template.md
│   └── agents-template.md
├── 2_commands/             # Commands and tools
│   ├── workflows/          # Multi-agent orchestration
│   │   ├── spec-driven.md
│   │   └── ...
│   └── [tools]             # Single-purpose tools
│       ├── constitution.md
│       ├── specify.md
│       └── ...
├── 3_tech_stacks/          # Tech references
│   ├── tech-stack-spring-hex.md
│   ├── tech-stack-dotfiles.md
│   └── tech-stack-ai.md
└── 4_agents/               # Specialized agent definitions
    ├── speccing/
    ├── planning/
    ├── engineering/
    ├── quality/
    ├── infrastructure/
    ├── data/
    └── business/
```

### Unix Philosophy Applied to AI Configs
- **Do one thing well**: Each agent has single, clear responsibility
- **Composability**: Agents and workflows can be combined
- **Plain text**: All configs are markdown (readable, version-controlled)
- **Modularity**: Separate concerns into discrete files

## Agent Definition Standards

### Agent File Structure
```markdown
---
name: "Agent Name"
description: "Clear, concise description"
color: "#HEXCODE"
tools: ["Read", "Write", "Edit", "Bash", "Glob", "Grep", "TodoWrite"]
backstory: |
  Memorable, personality-driven origin story
---

# Agent Title

## Purpose
## Agent Identity
## Input Format
## Core Responsibilities
## Implementation Process
## Task Management
## Quality Checklist
## Integration Notes
## Restrictions
```

### Agent Design Principles
1. **Single Responsibility**: One agent, one clear focus
2. **Agent-Agnostic**: No tool-specific commands (works across Claude/Copilot/Gemini)
3. **Memorable Backstory**: Personality-driven, explains agent's approach
4. **Clear Boundaries**: Explicit integration points with other agents
5. **Strong Language**: Use NEVER/ALWAYS for restrictions

### Frontmatter Requirements
- **name**: Memorable character name (e.g., "Rex the Red-Green-Refactor")
- **description**: One-line specialty description
- **color**: Hex color for visual identification
- **tools**: Array of available tools (Claude Code specific, optional for others)
- **backstory**: Character origin story (explains values and approach)

## Workflow Patterns

### Spec-Driven Development Workflow
```
TRANSLATE → PLAN → BUILD → VERIFY

Valdis         Decomposer Dale    Builder Agents    Judge Dredd
(spec.md)   →  (plan.md/tasks.md) → (implementation) → (review)
```

### Agent Categorization
- **0_speccing**: Requirements → Specifications
- **1_planning**: Specifications → Implementation Plans
- **2_engineering**: Implementation Plans → Code
- **3_quality**: Code → Review/Fixes

## Configuration Management

### Templates (1_templates/)
Project specification templates:
- **spec-template.md**: Technical specification format
- **plan-template.md**: Implementation plan format
- **tasks-template.md**: Task breakdown format
- **bootstrap-template.md**: Project bootstrap format
- **review-template.md**: Code review format
- **constitution-template.md**: Constitution format
- **agents-template.md**: AGENTS.md format

### Commands (2_commands/)
Reusable commands and workflow patterns:
- **Workflows (2_commands/workflows/)**: Multi-agent orchestration patterns
  - **spec-driven.md**: Specification-first development
  - **tdd-cycle.md**: Test-Driven Development process
  - **full-review.md**: Comprehensive code review
- **Tools**: Single-purpose commands for specific tasks
  - **constitution.md**, **specify.md**, **plan.md**, etc.

### Tech Stacks (3_tech_stacks/)
Technology-specific patterns and conventions:
- **tech-stack-spring-hex.md**: Spring Boot + hexagonal architecture
- **tech-stack-dotfiles.md**: Shell script patterns
- **tech-stack-ai.md**: AI configuration systems (this file)

### Agent Definitions (4_agents/)
Specialized agent implementations:
- Each agent focuses on ONE specific responsibility
- Clear integration points between agents
- Organized by domain (engineering/quality/infrastructure/data/business)

**Note:** Project documentation (constitution.md) is generated by **Founding Father Franklin** agent via `/constitution` command. AGENTS.md is generated by Decomposer Dale during `/plan` Phase 1, not via manual templates.

## Agent-Agnostic Language

### DO Use:
```markdown
- "Read the file at path/to/file.java"
- "Create a new file with the following content"
- "Follow the Red-Green-Refactor cycle"
- "Verify all tests pass"
- "Run shellcheck to validate scripts"
```

### DON'T Use:
```markdown
- "Use the Read tool to read path/to/file.java"
- "Run `cat path/to/file.java`"
- "Execute the Bash tool with command 'mvn test'"
- Tool-specific instructions
- Platform-specific commands in generic context
```

## Backstory Guidelines

### Effective Backstories
Create memorable, personality-driven backstories that:
- **Explain WHY**: Why the agent has specific values
- **Make memorable**: Unique character that sticks in mind
- **Add humor**: Quirky but professional
- **Connect to domain**: Relates to agent's expertise
- **Include motto**: Catchphrase that captures philosophy

### Backstory Examples
- **Rex**: Time-traveling dinosaur who discovered TDD, refuses to write code before tests
- **Valdis**: Bridge troll who spent 200 years translating wishes into contracts
- **Dale**: Project manager who built a cathedral without planning (disaster)
- **Shane**: Scottish shepherd who realizes dotfiles need same care as sheep

## Quality Standards

### Agent Quality Checklist
- [ ] Frontmatter includes all fields (name, description, color, tools, backstory)
- [ ] Purpose statement is clear and focused
- [ ] Agent identity defines personality and approach
- [ ] Input/output formats clearly specified
- [ ] Core responsibilities numbered and actionable
- [ ] Implementation process broken into phases
- [ ] Task management section with TodoWrite requirements
- [ ] Quality checklist provided
- [ ] Integration notes explain workflow position
- [ ] Restrictions use strong "NEVER/ALWAYS" language
- [ ] Backstory is memorable and relevant
- [ ] Language is agent-agnostic (no tool-specific commands)
- [ ] No duplication with existing agents/patterns
- [ ] README.md updated when adding agents

### Configuration Best Practices
- **DRY Principle**: Extract shared patterns appropriately within the new structure
- **Single Source of Truth**: Each concern defined once (no @import dependencies)
- **Evergreen Language**: No "recently", "new", "modern" (code ages)
- **Strong Restrictions**: Use absolute language (NEVER/ALWAYS)
- **Clear Boundaries**: Explicit agent handoff protocols

## Tech Stack Context Files

### Purpose
Provide technology-specific patterns for planning and implementation without hardcoding into agents.

### Structure
Each `tech-stack-{name}.md` file contains:
- **Architecture patterns**: Layering, component structure
- **Testing frameworks**: Unit, integration, e2e test tools
- **Conventions**: Naming, file organization, idioms
- **Common components**: Typical building blocks
- **Best practices**: Tech-specific quality standards
- **Code examples**: Canonical patterns

### Available Tech Stacks
- `tech-stack-spring-hex.md`: Spring Boot, Hexagonal Architecture
- `tech-stack-dotfiles.md`: Shell scripts, BATS testing
- `tech-stack-ai.md`: AI configuration systems (this file)

### Adding New Tech Stacks
1. Create `.ai/3_tech_stacks/tech-stack-{name}.md`
2. Document architecture, testing, conventions
3. Provide code examples and patterns
4. Add to project's `constitution.md`: `tech_stack: {name}`
5. Planning agents auto-load during planning phase

## Planning Considerations

### When Planning AI Configuration Features
1. **Agent vs. Workflow**: Should this be a new agent or a workflow pattern?
2. **Category**: Which folder (1_templates, 2_commands, 3_tech_stacks, 4_agents)?
3. **Scope**: Single, clear responsibility or too broad?
4. **Duplication**: Does similar pattern already exist?
5. **Integration**: How does this fit in the workflow (Translate/Plan/Build/Verify)?
6. **Agent-agnostic**: Can this work across Claude/Copilot/Gemini?

### Task Breakdown Pattern
1. **T1-T2**: Design agent/workflow structure (frontmatter, sections)
2. **T3-T4**: Write backstory and purpose
3. **T5-T7**: Document core responsibilities and process
4. **T8-T9**: Add quality checklist and restrictions
5. **T10**: Write integration notes
6. **T11**: Update README.md
7. **T12**: Verify agent-agnostic language
8. **T13**: Test with target AI platforms

### Common Task Types
- Create new agent definition in `4_agents/`
- Create new workflow pattern in `2_commands/workflows/`
- Create new command tool in `2_commands/`
- Create new tech stack reference in `3_tech_stacks/`
- Update agent category README.md
- Add integration notes between agents
- Refactor shared patterns to reduce duplication

## Directory Structure Conventions

### Naming Conventions
- **Folders**: `0_category/`, `1_category/` (numbered for ordering)
- **Agent files**: `agent-name.md` (kebab-case)
- **Workflow files**: `workflow-name.md` (kebab-case)
- **Core files**: `pattern-name.md` (kebab-case)

### README Files
Each category folder must have README.md:
- List of agents/patterns in that category
- When to use each one
- Invocation examples
- Brief backstory/description

## Integration with AI Tools

### Claude Code
- Uses Task tool to delegate to agents
- TodoWrite for task management
- Full tool access (Read, Write, Edit, Bash, etc.)

### GitHub Copilot
- Agents available as context patterns
- Reference in comments/prompts
- No direct tool invocation

### Gemini/Cursor
- Import agent specifications
- Reference in workflow prompts
- Adapt to tool capabilities

## Best Practices

### Maintainability
- **Small, focused agents**: Each does one thing well
- **Clear separation**: Templates vs Commands vs Tech Stacks vs Agents
- **Comprehensive documentation**: Every agent has examples
- **Version control everything**: All configs in git

### Portability
- **Agent-agnostic language**: Works across platforms
- **No hardcoded paths**: Use relative references
- **Platform adaptations**: Document tool-specific notes separately

### Evolution
- **Refactor duplication**: Extract shared patterns appropriately
- **Update documentation**: Keep READMEs current
- **Test across platforms**: Verify with multiple AI tools
- **Gather feedback**: Improve based on actual usage

## References
- Spec-Driven Development: `.ai/2_commands/workflows/spec-driven.md`
- Agent Categories: `.ai/4_agents/README.md`
- Constitution Command: `.ai/2_commands/constitution.md` (Bootstrap project constitution)
